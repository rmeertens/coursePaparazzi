\documentclass{article}

\input{ccpap}

\begin{document}
\ccpmaketitle{Safety}{\ldots Safety}{Lesson 1}

\subsection*{Introduction}
Welcome to the first lesson of a short and gentle introduction to programming autonomous drones. As we will see in this lesson it is easy to break a drone while trying to make it autonomous. Luckily you can avoid all crashes by simply following several rules. This week we discuss how you can break drones, how to prevent this, and how to teach yourself to fly a drone. 

\subsection*{Goals of this exercise}
\begin{itemize}
\item Learn how drones break
\item Know when to stop flying, and when not to start flying
\item Learn how to fly your drone (so you can recover your drone when automation shows unexpected situations)
\end{itemize}

\subsection*{Why do drones and batteries break? (and how can YOU break them?)}
Breaking a drone is easy, they tend to break when they fall on the ground, or get stuck in the net. As you will create an autonomous drone during this course, it is important to start with learning how to prevent breaking this fragile and expensive (600 euros) machine. The most common reasons for a drone and/or its battery to break are:
\begin{itemize}
\item Low power: when the battery is drained too much the drone will fall down. Sometimes the battery has enough charge to keep the drone in the air, but not enough charge to perform a special manouevre such as yawing. It then starts to behave strangely, as the battery can't provide enough thrust for all the motors. This behaviour will start suddenly, so it is important to stop flying in time!

Lithium Ion (LiPo) batteries, in particular, become permanently damaged when the battery voltage drops too low. This damage is irreversible and will lead to a permanent reduction in total battery capacity.

For the bebop, a full battery has a voltage of 12.4 V and an empty on 11.1 V. Land once the battery voltage drops below 11.1 V! Additionally, the bebop will use power when on, so don't forget to check the battery level even when not flying, e.g. while debugging.


\item Lost GPS: knowing its location is important for your drone when it is flying autonomously. When you are navigating on a flight plan your drone tries to reach a certain waypoint. If the location of the drone is not updated it thinks it has to go on and on, until it hits a wall. 

During this course the position of the drone is supplied by a computer in the Cyberzoo: the Optitrack system. Sometimes this system can break, or somebody puts the wrong settings in the Optitrack computer, or the connection to your drone is lost. Be sure to always check if the GPS data is correct before every flight and program an appropriate landing as soon as the GPS is lost. Also be prepared to take over your drone manually at any time. 

\item Lost Wifi: when this happens the drone receives nothing from your laptop. This means that the joystick commands you give don't reach the drone, and that the GPS is not updated anymore. To prevent this you will need to program a fail-safe mode (which we will discuss in more detail later). Note that you lose wifi more often when there are many laptops or drones in the arena. 
\item Bad code: Programming the wrong code will mean your drone does something unexpected. Examples are: 
\begin{itemize}
	\item Not detecting an obstacle and therefore flying into this obstacle. 
	\item Writing data out of your array, therefore changing a random variable on your drone. 
	\item Dividing by zero, the whole autopilot will now stop and your drone drops out of the sky. 
\end{itemize}
\end{itemize}


\subsection*{How to prevent that drones break }
All mistakes in the previous section can and should be prevented. Although the Bebop is sold as a toy, it is a very fragile and expensive toy. 
\begin{itemize}
\item Look at the voltage of the battery. This can be seen in the Paparazzi ground station. Always have a team member check on the battery level while flying. Paparazzi itself will warn you when your battery is too empty by speaking to you, but only if you enable this feature (we will teach you later how). Make sure you enable speech so you can hear all important messages.

\item Always check that your drone has a good gps fix. If it loses GPS the drone can start an automatic landing procedure, but only if you program this in the flight plan. Paparazzi also warns you when your GPS is lost by speaking to you, again: you may not fly without using this function. 

Unfortunately Optitrack can not track your drone well in the corners of the Cyberzoo. It is therefore important to avoid these places. It is possible to create a procedure when your drone leaves the center of the arena, make sure to turn this on, and make sure it works by testing it. Be sure to always have a trained safety pilot ready to take manual control when things go wrong. 

\item Practice your drone flying skills in a simulator. If your drone does not do what you expect it to do you can still save it manually. If your flying skills are not good you will cause even more damage while trying so save your drone. As your brain needs to train itself in flying a drone in all positions, using a simulator for a few days will definitely prevent drone crashes. We will tell you more about a good simulator in the next section. 

\item Always check BEFORE flying that the joystick you plugged in is working, and move the sticks to all extremes before flying. You can check that the joystick is working by changing the mode, if the mode on your ground control station changes you know that it works. 
\item If you want to check if your experimental module works, check so WITHOUT taking off. If the drone without flying already has a hard time detecting obstacles, your drone will definitely crash.
\end{itemize}

\end{document}